{
 "absolute_value": 0,
 "align_labels_right": 0,
 "company": "Supima Holdings, Inc. (Demo)",
 "creation": "2024-11-15 18:13:17.406595",
 "css": "/* General Table Styling */\r\ntable, th, td {\r\n    /* Uncomment to apply border: */\r\n    /* border: 1px solid; */\r\n    /* Uncomment to adjust font size: */\r\n    /* font-size: 11px; */\r\n}\r\n\r\ntable {\r\n    border-collapse: collapse;\r\n}\r\n\r\n/* Padding for Table Cells in Print Format */\r\n.print-format td {\r\n    padding: 2px 4px !important;\r\n}\r\n\r\n/* Background Color for Print Preview */\r\n.print-preview {\r\n    background-color: black !important;\r\n}\r\n\r\n/* Print Format Styles */\r\n@media all {\r\n    .print-format {\r\n        /* Width and Height (8.5in x 11in or 21.6cm x 27.9cm) */\r\n        max-width: 21.1cm;\r\n        width: 21.6cm;\r\n        min-height: 27.9cm;\r\n        height: 27.9cm;\r\n\r\n        /* Padding and Margin */\r\n        padding: 0 0.5cm 0.5cm 0.5cm;\r\n        margin: 0;\r\n\r\n        /* Alignment */\r\n        float: left;\r\n\r\n        /* Uncomment for background and shadow styles: */\r\n        /* background-color: rgba(255, 255, 255, 1.0); */\r\n        /* box-shadow: 0px 0px 9px rgba(0, 0, 0, 0.5); */\r\n    }\r\n\r\n    /* Landscape Orientation */\r\n    .print-format.landscape {\r\n        max-width: 27.9cm;\r\n        width: 27.9cm;\r\n    }\r\n\r\n    /* Portrait Orientation */\r\n    .print-format.portrait {\r\n        max-width: 21.1cm;\r\n        width: 21.1cm;\r\n    }\r\n}\r\n\r\n/* Page Setup for Printing */\r\n@page {\r\n    size: 21.1cm 27.9cm portrait;\r\n}\r\n",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Import Logs",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "\r\n{% set data = doc.import_log_details | sort(attribute=\"employee\")| sort(attribute=\"trn_datetime\")  %}\r\n    {% set datas = []%}\r\n{% for item in data %}\r\n\r\n\r\n{% endfor %}\r\n{% set results = [] %}\r\n{%- set products = [] -%}\r\n{% for employee in data| groupby('employee')  %}\r\n\r\n{% set results = [] %}\r\n {% set trn_date_count = {} %}\r\n    {# Count occurrences of each trn_date #}\r\n    {% for log in employee.list  %}\r\n\r\n        {% set trn_date = log.date %}\r\n        {% if trn_date in trn_date_count %}\r\n            {% set trn_date_count = trn_date_count.update({trn_date: trn_date_count[trn_date] + 1}) %}\r\n        {% else %}\r\n            {% set trn_date_count = trn_date_count.update({trn_date: 1}) %}\r\n        {% endif %}\r\n    {% endfor %}\r\n\r\n        {% set last_in_item = namespace(employee=\"\",trn_date=\"\",date_in=\"\",time_in=\"\",date_out=\"\",time_out=\"\",trn_datetime_out=\"\",trn_datetime_in=\"\",remarks=\"\") %}\r\n\r\n        {% for log in employee.list  %}\r\n            {% if log.log_type == 'In' %} \r\n                {% if last_in_item.date_out == \"\" and last_in_item.date_in != \"\" %}\r\n                    {% set last_in_item.trn_date = last_in_item.trn_date  %}\r\n                    {% set last_in_item.trn_datetime_out =  last_in_item.trn_datetime_out  %}\r\n                    {% set last_in_item.remarks = \"No Out\"  %}\r\n\r\n                    {{- products.append(\r\n                        { \r\n                            'employee':last_in_item.employee,\r\n                            'trn_date':last_in_item.date_in,\r\n                            'date_in':last_in_item.date_in,\r\n                            'time_in':last_in_item.time_in,\r\n                            'date_out':last_in_item.date_out,\r\n                            'time_out':last_in_item.time_out,\r\n                            'trn_datetime_in': last_in_item.trn_datetime_in,\r\n                            'trn_datetime_out': last_in_item.trn_datetime_out,\r\n                            'count': 1,\r\n                            'remarks':\"No Out\"}) or '' -}}\r\n\r\n                      {% set last_in_item.trn_date = \"\"  %}\r\n                      {% set last_in_item.date_in = \"\"  %}\r\n                      {% set last_in_item.time_in = \"\"  %} \r\n                      {% set last_in_item.date_out = \"\"  %}\r\n                      {% set last_in_item.time_out = \"\"  %}\r\n                      {% set last_in_item.trn_datetime_in = \"\"  %}\r\n                      {% set last_in_item.trn_datetime_out = \"\"  %}\r\n                      {% set last_in_item.remarks = \"\"  %} \r\n\r\n                {% endif %} \r\n\r\n\r\n                    {% set last_in_item.employee = log.employee  %}\r\n                    {% set last_in_item.trn_date = log.date  %} \r\n                    {% set last_in_item.date_in = log.date  %}\r\n                    {% set last_in_item.time_in = log.time  %}  \r\n                    {% set last_in_item.trn_datetime_in = log.trn_datetime  %}\r\n                    {% set last_in_item.trn_datetime_out = \"\"  %}\r\n\r\n                    {% set last_in_item.date_out = \"\"  %}\r\n                    {% set last_in_item.time_out = \"\"  %}\r\n                    {% set last_in_item.remarks = \"\"  %}  \r\n\r\n            {% elif log.log_type == 'Out' %} \r\n\r\n                {% if last_in_item.date_in != \"\" %}   \r\n                    {% set last_in_item.employee = log.employee  %}\r\n                    {% set last_in_item.date_out = log.date  %}\r\n                    {% set last_in_item.time_out = log.time  %} \r\n                    {% set last_in_item.trn_datetime_out = log.trn_datetime %}\r\n                    {% set last_in_item.remarks = \"\"  %}\r\n\r\n                     {{- products.append(\r\n                        {\r\n                            'employee':last_in_item.employee,\r\n                            'trn_date':last_in_item.trn_date,\r\n                            'date_in':last_in_item.date_in,\r\n                            'time_in':last_in_item.time_in,\r\n                            'date_out':last_in_item.date_out,\r\n                            'time_out':last_in_item.time_out,\r\n                            'trn_datetime_in': last_in_item.trn_datetime_in,\r\n                            'trn_datetime_out': last_in_item.trn_datetime_out,\r\n                            'count': trn_date_count[last_in_item.trn_date],\r\n                            'remarks':last_in_item.remarks}) or '' -}}\r\n\r\n                      {% set last_in_item.trn_date = \"\"  %}\r\n                      {% set last_in_item.date_in = \"\"  %}\r\n                      {% set last_in_item.time_in = \"\"  %} \r\n                      {% set last_in_item.date_out = \"\"  %}\r\n                      {% set last_in_item.time_out = \"\"  %}\r\n                      {% set last_in_item.trn_datetime_in = \"\"  %}\r\n                      {% set last_in_item.trn_datetime_out = \"\"  %}\r\n                      {% set last_in_item.remarks = \"\"  %}\r\n                {% else %}\r\n\r\n                      {% set last_in_item.trn_date = \"\"  %}\r\n                      {% set last_in_item.date_in = \"\"  %}\r\n                      {% set last_in_item.time_in = \"\"  %} \r\n                      {% set last_in_item.date_out = \"\"  %}\r\n                      {% set last_in_item.time_out = \"\"  %}\r\n                      {% set last_in_item.trn_datetime_in = \"\"  %}\r\n                      {% set last_in_item.trn_datetime_out = \"\"  %}\r\n                      {% set last_in_item.remarks = \"\"  %}  \r\n\r\n                     {{- products.append(\r\n                        {\r\n                            'employee':log.employee,\r\n                            'trn_date':log.date,\r\n                            'trn_datetime_in': \"\",\r\n                            'trn_datetime_out': log.trn_datetime,\r\n                            'date_in':\"\",\r\n                            'time_in':\"\",\r\n                            'date_out':log.date,\r\n                            'time_out':log.time,\r\n                            'count': 1,\r\n                            'remarks':'No In'}) or '' -}}      \r\n                {% endif %}\r\n\r\n            {% endif %}\r\n        {% endfor %}\r\n {# Handle any remaining 'In' entries without matching 'Out' #}\r\n    {% if last_in_item.date_in != \"\" and last_in_item.date_out == \"\" %}\r\n        {{- products.append(\r\n            {\r\n                'employee': last_in_item.employee,\r\n                'trn_date': last_in_item.trn_date,\r\n                'date_in': last_in_item.date_in,\r\n                'time_in': last_in_item.time_in,\r\n                'trn_datetime_in': last_in_item.trn_datetime_in,\r\n                'date_out': \"\",\r\n                'time_out': \"\",\r\n                'trn_datetime_out': \"\",\r\n                'remarks': \"No Out\",\r\n                'count': trn_date_count[last_in_item.trn_date]\r\n            }) or '' -}}\r\n    {% endif %}\r\n    {% endfor %}\r\n{% for employee in products | groupby('employee') %} \r\n    <table class=\"table\" style=\"page-break-before: always; width: 100%;\">\r\n\r\n        <thead>\r\n            <tr>\r\n                <th colspan=\"4\">\r\n                    <div class=\"col\">\r\n                        <div class=\"col\"><h2>{{ frappe.db.get_value('Employee', employee.grouper , \"employee_name\") }}</h2></div>\r\n                        <div class=\"col\">\r\n                            Cutoff Date : <b>{{doc.att_from_date}} - \r\n                            {{doc.att_to_date}}</b>\r\n                        </div>\r\n                    </div>\r\n\r\n                </th>\r\n            </tr>\r\n            <tr>  \r\n                <th style=\"width:15%\">TRN Date</th> \r\n                <!--<th style=\"width:15%\" class=\"text-center\">Date In</th>-->\r\n                <th style=\"width:15%\" class=\"text-center\">Time In</th>\r\n                <!--<th style=\"width:15%\" class=\"text-center\">Date Out</th>-->\r\n                <th style=\"width:15%\" class=\"text-center\">Time Out</th>\r\n                <th  class=\"text-center\">Remarks</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>  \r\n        {% set prev_data  = namespace(value =\"\")%}\r\n        {% for entry in employee.list  %}\r\n         {# if (entry.remarks != \"\" or prev_data.value  == entry.trn_date) #}\r\n                    <tr>   \r\n                        <td>{{ entry.trn_date }}</td>\r\n                        <!--<td class=\"text-center\">{{ entry.date_in }}</td> -->\r\n                        <td class=\"text-center\">{{ entry.time_in }}</td>\r\n                        <!--<td class=\"text-center\">{{ entry.date_out }}</td>-->\r\n                        <td class=\"text-center\">{{ entry.time_out }}</td>\r\n                        <td>{{ \"Multiple Trn Date, \" if prev_data.value  == entry.trn_date else \"\"}}{{ entry.remarks }}</td>\r\n                    </tr> \r\n        {# endif #}    \r\n        {% set prev_data.value  = entry.trn_date%}       \r\n\r\n        \r\n    {% endfor %}  \r\n        </tbody>\r\n    </table>\r\n \r\n       {% endfor %}\r\n\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2024-11-17 14:42:10.022170",
 "modified_by": "Administrator",
 "module": "Attendance",
 "name": "Import Logs",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}